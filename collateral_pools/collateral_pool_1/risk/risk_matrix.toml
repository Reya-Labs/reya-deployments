[invoke.cp_1rusd_create_risk_matrix]
target = ["CoreProxy"]
abi = "<%= JSON.stringify(contracts.CoreProxy.abi.concat({'type':'event','name':'RiskMatrixCreation','inputs':[{'name':'collateralPoolId','type':'uint128','indexed':true,'internalType':'uint128'},{'name':'riskBlockId','type':'uint256','indexed':true,'internalType':'uint256'},{'name':'riskMatrix','type':'int64[][]','indexed':false,'internalType':'SD1x18[][]'},{'name':'blockTimestamp','type':'uint256','indexed':false,'internalType':'uint256'}],'anonymous':false})) %>"
# todo later: use getCollateralPoolOwner
fromCall.func = "owner"
func = "createRiskMatrix"
var.cp1RusdRiskBlockId.event = "RiskMatrixCreation"
var.cp1RusdRiskBlockId.arg = 0
args = [
  "<%= settings.cp1RusdId %>",
  [
    ["<%= parseEther(settings.cp1Rusd_riskMatrix00Unscaled) %>", "<%= parseEther(settings.cp1Rusd_riskMatrix01Unscaled) %>"],
    ["<%= parseEther(settings.cp1Rusd_riskMatrix10Unscaled) %>", "<%= parseEther(settings.cp1Rusd_riskMatrix11Unscaled) %>"],
  ]
]
depends = [
  "var.cp_1rusd_vars"
]

[invoke.cp_1rusd_set_risk_block_id_market_1eth]
target = ["PassivePerpProxy"]
fromCall.func = "owner"
func = "setRiskBlockId"
args = [
  "<%= settings.market1EthId %>",
  "<%= settings.cp1RusdRiskBlockId %>",
  "0"
]
depends = [
  "invoke.cp_1rusd_create_risk_matrix"
]

[invoke.cp_1rusd_set_risk_block_id_market_2btc]
target = ["PassivePerpProxy"]
fromCall.func = "owner"
func = "setRiskBlockId"
args = [
  "<%= settings.market2BtcId %>",
  "<%= settings.cp1RusdRiskBlockId %>",
  "1"
]
depends = [
  "invoke.cp_1rusd_create_risk_matrix"
]

