[provision.usdc]
source = "test2-reya-tokens:1.0.0@proxy"
targetPreset = "usdc"
options.owner = "<%= settings.owner %>"
options.salt = "<%= settings.salt %>"
depends = [
  "setting.owner",
  "setting.salt"
]

# Upgrades implementation of InitialProxy to point to the new
# router implementation.
[invoke.upgrade_proxy]
target = ["usdc.InitialProxy"]
fromCall.func = "owner"
func = "upgradeTo"
args = ["<%= imports.reyaTokenRouter.contracts.TokenRouter.address %>"]
factory.USDCProxy.abiOf = ["reyaTokenRouter.TokenRouter"]
factory.USDCProxy.event = "Upgraded"
factory.USDCProxy.arg = 0
depends = [
  "provision.usdc",
]

[setting.usdcTokenName]
defaultValue = "USD Coin"
[setting.usdcTokenSymbol]
defaultValue = "USDC"
[setting.usdcTokenDecimals]
defaultValue = "6"

[invoke.usdc_initialize]
target = ["USDCProxy"]
fromCall.func = "owner"
func = "initialize"
args = [ 
  "<%= settings.usdcTokenName %>",
  "<%= settings.usdcTokenSymbol %>",
  "<%= settings.usdcTokenDecimals %>",
]
depends = ["invoke.upgrade_proxy"]